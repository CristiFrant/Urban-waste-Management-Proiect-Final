<div class="waste-management-container">
    <div class="header-bar">
        <h3>GestioneÈ™te Punctele de Colectare</h3>
        <div class="header-actions">
            <button (click)="goToMap()" class="nav-button">Harta</button>
            <button (click)="goToDashboard()" class="nav-button dashboard-btn">ğŸ“Š Dashboard</button>
            <button (click)="goToProfile()" class="nav-button">Profil</button>
            <button (click)="logout()" class="logout-button">DeconecteazÄƒ-te</button>
        </div>
    </div>

    <!-- Conectare Firebase -->
    <div class="firebase-connection" *ngIf="!isConnected">
        <button (click)="connectFirebase()">ConecteazÄƒ-te la Firebase</button>
    </div>

    <!-- SecÈ›iunea activÄƒ dupÄƒ conectare -->
    <div class="content" *ngIf="isConnected">
        <!-- SecÈ›iunea pentru supermarket-uri -->
        <div class="supermarket-section">
            <h4>Gestionare Puncte de Colectare</h4>
            <div class="supermarket-actions">
                <button (click)="searchSupermarkets()" [disabled]="isSearching" class="search-button">
                    {{ isSearching ? 'Se cautÄƒ...' : 'CautÄƒ Puncte de Colectare' }}
                </button>
                <button (click)="downloadSupermarketsCSV()" class="download-button">
                    DescarcÄƒ CSV Puncte Colectare
                </button>
                <button (click)="addSupermarketsToFirebase()" class="add-button">
                    AdaugÄƒ Puncte de Colectare Ã®n Firebase
                </button>
            </div>
            <div *ngIf="supermarketData.length > 0" class="supermarket-info">
                <p>ğŸª S-au gÄƒsit <strong>{{ supermarketData.length }}</strong> puncte de colectare</p>
            </div>
        </div>

        <hr style="margin: 20px 0; border: 1px solid #ddd;">

        <!-- SecÈ›iunea existentÄƒ pentru puncte de colectare -->
        <h4>Gestionare Puncte de Colectare</h4>
        <div class="actions">
            <label for="csv-upload" class="file-upload-label">ÃncarcÄƒ fiÈ™ier CSV:</label>
            <input type="file" (change)="loadCSV($event)" accept=".csv">            
            <button (click)="addListItem()">AdaugÄƒ Punct</button>
            <button (click)="addAllRemainingItems()">AdaugÄƒ Toate Datele RÄƒmase</button>
            <button (click)="setCustomIndex()">SeteazÄƒ Index</button>
            <button class="delete-button" (click)="clearEntries()">È˜terge Toate Datele</button>
        </div>

        <!-- AfiÈ™are mesaj dacÄƒ nu existÄƒ date -->
        <div *ngIf="listItems.length === 0" class="no-data">
            Nicio datÄƒ disponibilÄƒ. ÃncarcÄƒ fiÈ™ierul CSV sau adaugÄƒ puncte manual.
        </div>

        <!-- Tabel -->
        <div class="table-container" *ngIf="listItems.length > 0">
            <table>
                <thead>
                    <tr>
                        <th>Nume</th>
                        <th>Plastic</th>
                        <th>Hartie</th>
                        <th>Carti</th>
                        <th>Sticla</th>
                        <th>Metal</th>
                        <th>Haine</th>
                        <th>Electronice</th>
                        <th>Electrocasnice</th>
                        <th>Ochelari</th>
                        <th>Baterii</th>
                        <th>Vapes</th>
                        <th>Vopsea</th>
                        <th>Automobile</th>
                        <th>Antigel</th>
                        <th>Ulei</th>
                        <th>Moloz</th>
                        <th>Telefon</th>
                        <th>Zile Lucrate</th>
                        <th>Program</th>
                        <th>Adresa</th>
                        <th>Latitudine</th>
                        <th>Longitudine</th>
                        <th>Descriere</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of listItems">
                        <td>{{ item.nume }}</td>
                        <td>{{ item.plastic ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.hartie ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.carti ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.sticla ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.metal ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.haine ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.electronice ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.electrocasnice ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.ochelari ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.baterii ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.vapes ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.vopsea ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.automobile ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.antigel ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.ulei ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.moloz ? 'Da' : 'Nu' }}</td>
                        <td>{{ item.telefon }}</td>
                        <td>{{ item.zileLucrate }}</td>
                        <td>{{ item.program }}</td>
                        <td>{{ item.adresa }}</td>
                        <td>{{ item.latitudine }}</td>
                        <td>{{ item.longitudine }}</td>
                        <td>{{ item.descriere }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
